# Кодировка H_Code

## Пояснение
В этом покументе описаны варианты для 10-сс, всё то-же самое можно использовать для других систем счисления, заменив "mod 10" на "mod N", где N - длинна алвафита

## Операции
- A, B - числа в виде списка элементов
- a, b - отдельные цифры числа
- A<sub>n</sub> - цифра числа A в позиции n

---

$$A = [A_0,A_1,A_2,A_3] = [a,b,c,d]$$

$$a \oplus b=(a + b)\bmod10$$

$$a' = (10 - a)\bmod 10$$

$$a \ominus b=(a - b + 10)\bmod10$$

$$a \ominus b = a\oplus b'$$

---

$$A \oplus B = [A_0\oplus B_0,...,A_n\oplus B_n]$$

$$A' = [A_0',...,A_n']$$

$$A \ominus B = [A_0 \ominus B_0,...,A_n \ominus B_n]$$

$$A \ominus B = A\oplus B'$$

---

$$A\xrightarrow{code}X_A$$

$$X_A\xrightarrow{decode}A$$

$$X_A\oplus X_B=X_{A\oplus B}$$

$$X_A\ominus X_B=X_{A\ominus B}$$

---

$$
A
\underbrace{
\xrightarrow{code}X\xrightarrow{code}...\xrightarrow{code}
}_{30}
X^{30}_A
==A\xrightarrow{code^{30}}X^{30}_A
$$

$$A\xrightarrow{code^A}L_A$$

---

$$A\xrightarrow{cBlock(x,y[,key])}B_A$$

---

## Описание
***Кодирование:***


$$
[1,4,3,2,4]
\xrightarrow{code}
[2,9,9,3,1]
$$

$$
\text{reverse }([1,4,3,2,4]\ominus[0,1,4,3,2,\cancel4]) = [2,9,9,3,1]
$$

$$
\text{reverse }[(1\ominus0),(4\ominus1),(3\ominus4),(2\ominus3),(4\ominus2)] = [2,9,9,3,1]
$$

***Декодирование:***

$$
[2,9,9,3,1]
\xrightarrow{decode}
[1,4,3,2,4]
$$

$$
\begin{matrix}
 & [0,0,0,0,2] \\
\oplus & [0,0,0,9,9]\\
\oplus & [0,0,9,9,9]\\
\oplus & [0,3,3,3,3]\\
\oplus & [1,1,1,1,1]\\
= & [1,4,3,2,4]
\end{matrix}
$$

## Кодирование и декодирование через пресет

Можно создать пресет для кодировиния N раз, используя его результат можно получить с помощью простых операций за ***O(0)***

пресет для 1 кодирования это список для каждого элемента L-значной кодировки
```
[[(0..),1',1], .. [1', 1, (0..)], [1, 0, (0..)]]

Например для 2-х значнных
[[9, 1], [1, 0]]

Для 3-х
[[0, 9, 1], [9, 1, 0], [1, 0, 0]]
```

Для создания пресета для N раз мы кодируем каждый элемент раз

```
Например, для кодирования 5-х значных кодов 5000 используется пресет:
[[9,1,3,2,0],[1,2,3,3,2],[3,3,2,3,5],[2,3,3,4,6],[0,2,5,6,5]]
```

## Ленты (Циклы кодирования)

При кодировании мы получаем новое число, той же разрядности (длинны), и рано или поздно при множестве кодирования мы придем к изначальному числу

**Пример одной из лент 2-х значной кодировки:**

$$\underbrace{
  [2,6]
  \xrightarrow{code}[4,2]
  \xrightarrow{code}[8,4]
  \xrightarrow{code}[6,8]
  }_4
\xrightarrow{code}
[2,6]
$$

Есть 2 ленты, которые есть во всех разрядностях, и их функции можно использовать:
1. Лента нулей, Всегда обозначается (0) и имеет 1 элемент. никак не влияет на другие ленты при сложении
2. Лента состоящая только из 0 и 5. можно использовать как инвертор отдельных эдементов кода (При сумме и разности даёт один и тот-же результат: что-то инвертирует)

> Любую ленту можно разложить сумму одной любой ленты и другой (со смещением)

Например, У нас есть лента (1)<sub>7</sub> и мы хотим представить её суммой (5)<sub>0</sub> и чего-то еще

$$(1)_7 = (5)_0 \oplus x$$

$$[3,2]... = [5,0]... \oplus x$$

Что-бы найти недостающую часть, мы просто из (1)<sub>7</sub> вычитаем (5)<sub>0</sub>

$$x = (1)_7 \ominus (5)_0$$

$$x = [3,2]... \ominus [0,5]...$$

$$x = [3,7]...$$

Находим цикл получивщегося числа и смещение, в результате получаем (1)<sub>47</sub>

$$(1)_7 = (5)_0 + (1)_{47}$$

$$
\begin{matrix}
[3,2] \rightarrow [9,3] \rightarrow [4,9] \rightarrow [5,4] \rightarrow [9,5]\\
                    =\\
[0,5] \rightarrow [5,0] \rightarrow [5,5] \rightarrow [0,5] \rightarrow [5,0]\\
                   \oplus\\
[3,7] \rightarrow [4,3] \rightarrow [9,4] \rightarrow [5,9] \rightarrow [4,5]\\
\end{matrix}
$$

> Можно разложить начало лент, а смещение найти потом и пременить ко всем элементам разложения

В некоторых разрядностях можно разложить любую ленту на две других, отличных от первой, например для 5-и значнных чисел

При таком разложении получаем 2 ленты с одинаковым смещением, но вероятно есть разложение с разными смещениями

## Блоки

$$
\begin{CD}
  \begin{matrix} 5 & 3 \\
                 4 & 2 \end{matrix}
  @>>>
  \begin{matrix} 8 & 5 \\
                 8 & 4 \end{matrix}
  \\
  @VVV 
  \begin{matrix} \bigcirc & \bigcirc \\
                 \bigcirc & \bigcirc \end{matrix}
  @VVV 
  \\
  \begin{matrix} 9 & 9 \\
                 5 & 3 \end{matrix}
  @>>>
  \begin{matrix} 0 & 9 \\
                 8 & 5 \end{matrix}\end{CD}
$$

## 2-ух значные коды

***Правила:***

$$A = X_A\oplus X^2_A$$

**Влияние на все цифры:**
- A<sub>1</sub>: Через 1 кодирование
- A<sub>2</sub>: Через 2 кодирования

***Ленты:***
```
ID.   FIRST: LEN
----------------
(0).  [0,0]:   1
(1).  [0,1]:  60
(2).  [0,2]:  20
(5).  [0,5]:   3
(13). [1,3]:  12
(26). [2,6]:   4


VALS:
------------------------------------------------------------
00

01 -> 10 -> 91 -> 29 -> 72 -> 57 -> 25 -> 32 -> 93 -> 49 -> 
54 -> 95 -> 69 -> 36 -> 33 -> 03 -> 30 -> 73 -> 67 -> 16 -> 
51 -> 65 -> 96 -> 79 -> 27 -> 52 -> 75 -> 87 -> 98 -> 99 -> 
09 -> 90 -> 19 -> 81 -> 38 -> 53 -> 85 -> 78 -> 17 -> 61 -> 
56 -> 15 -> 41 -> 74 -> 77 -> 07 -> 70 -> 37 -> 43 -> 94 -> 
59 -> 45 -> 14 -> 31 -> 83 -> 58 -> 35 -> 23 -> 12 -> 11

02 -> 20 -> 82 -> 48 -> 44 -> 04 -> 40 -> 64 -> 86 -> 88 -> 
08 -> 80 -> 28 -> 62 -> 66 -> 06 -> 60 -> 46 -> 24 -> 22

05 -> 50 -> 55

13 -> 21 -> 92 -> 39 -> 63 -> 76 ->
97 -> 89 -> 18 -> 71 -> 47 -> 34

26 -> 42 -> 84 -> 68

```

*Суммы лент без смещения:*

|   _|             (26)|             (13)|             (5)|             (2)|            (1)|
|----|-----------------|-----------------|----------------|----------------|---------------|
| (1)| (1)<sub>24</sub>| (1)<sub>52</sub>|(2)<sub>15</sub>|(1)<sub>15</sub>|(2)<sub>0</sub>|
| (2)| (2)<sub>12</sub>| (1)<sub>41</sub>|(1)<sub>45</sub>| (2)<sub>5</sub>|               |
| (5)| (13)<sub>1</sub>| (13)<sub>8</sub>| (0)<sub>0</sub>|                |               |
|(13)| (13)<sub>3</sub>| (26)<sub>0</sub>|                |                |               |
|(26)| (26)<sub>1</sub>|                 |                |                |               |

## 3-х значные коды

**Влияние на все цифры:**
- A<sub>1</sub>: Через 3 кодирования
- A<sub>2</sub>: Через 2 кодирования
- A<sub>3</sub>: Через 4 кодирования

**Формула кодировки**
```
|0|             A|             B|             C|
|1|  0A, !1B,  1C| !1A,  1B, !0C|  1A, !0B,  0C|
|2|  2A, !1B,  0C| !1A,  2B, !1C|  0A, !1B,  1C|
|3|  1A, !3B,  2C| !3A,  3B, !1C|  2A, !1B,  0C|
|4|  5A, !4B,  1C| !4A,  6B, !3C|  1A, !3B,  2C|
|5|  5A, !9B,  5C| !9A, 10B, !4C|  5A, !4B,  1C|

|1| 091 | 910 | 100 |   
|2| 290 | 929 | 091 |   |
|3| 172 | 739 | 290 |   |
|4| 561 | 667 | 172 |   v
|5| 515 | 106 | 561 |   


1 = 091 ^-> n
2 = 910 ^-> n
3 = 100 ^-> n
```

- Пример
  - 435 -> 294 -> 572 -> 525 -> 375 -> 843
  - Для 435: {2} = [870, 665, 075] = 572
  - Для 435: {5} = [035, 400, 085] = 843

***Ленты:***
```
ID.  FIRST:   LEN
-----------------
(0). [0,0,0]:   1
(1). [0,0,1]: 434
(2). [0,0,2]:  62
(3). [0,0,3]: 434
(4). [0,0,4]:  62
(5). [0,0,5]:   7
```

*Суммы лент без смещения:*

|  _|              (5)|              (4)|             (2)|            (3)|            (1)|
|---|-----------------|-----------------|----------------|---------------|---------------|
|(1)| (4)<sub>31</sub>|  (5)<sub>0</sub>| (4)<sub>0</sub>|(3)<sub>0</sub>|(2)<sub>0</sub>|
|(2)|(3)<sub>217</sub>| (4)<sub>31</sub>| (5)<sub>0</sub>|(4)<sub>0</sub>|               |
|(3)| (2)<sub>31</sub>|(3)<sub>217</sub>|(4)<sub>31</sub>|               |               |
|(4)|(1)<sub>217</sub>| (2)<sub>31</sub>|                |               |               |
|(5)|  (0)<sub>0</sub>|                 |                |               |               |

## 4-х значные коды

***Ленты:***
```
ID.   FIRST:     LEN | ID.     FIRST:     LEN | ID.     FIRST:     LEN
---------------------|------------------------|-----------------------
 (0). [0,0,0,0]:   1 |   (29). [0,0,2,9]: 434 | (1105). [1,1,0,5]:  62
 (1). [0,0,0,1]: 434 |   (30). [0,0,3,0]: 434 | (1107). [1,1,0,7]:  62
 (2). [0,0,0,2]:  62 |   (32). [0,0,3,2]: 434 | (1109). [1,1,0,9]:   2
 (3). [0,0,0,3]: 434 |   (34). [0,0,3,4]: 434 | (1125). [1,1,2,5]:  62
 (4). [0,0,0,4]:  62 |   (36). [0,0,3,6]: 434 | (1141). [1,1,4,1]:  62
 (5). [0,0,0,5]:   7 |   (40). [0,0,4,0]:  62 | (1147). [1,1,4,7]:  62
(10). [0,0,1,0]: 434 |   (42). [0,0,4,2]:  62 | (1149). [1,1,4,9]:  62
(12). [0,0,1,2]: 434 |   (48). [0,0,4,8]:  62 | (1159). [1,1,5,9]:  14
(13). [0,0,1,3]: 434 |   (50). [0,0,5,0]:   7 | (1161). [1,1,6,1]:  62
(14). [0,0,1,4]: 434 |  (124). [0,1,2,4]: 434 | (1169). [1,1,6,9]:  62
(15). [0,0,1,5]: 434 |  (129). [0,1,2,9]: 434 | (2203). [2,2,0,3]:  14
(17). [0,0,1,7]: 434 |  (132). [0,1,3,2]: 434 | (2208). [2,2,0,8]:   2
(18). [0,0,1,8]: 434 |  (137). [0,1,3,7]: 434 | (2258). [2,2,5,8]:  14
(20). [0,0,2,0]:  62 |  (248). [0,2,4,8]:  62 | (3307). [3,3,0,7]:   2
(21). [0,0,2,1]: 434 |  (264). [0,2,6,4]:  62 | (4406). [4,4,0,6]:   2
(24). [0,0,2,4]:  62 | (1101). [1,1,0,1]:  62 | (5505). [5,5,0,5]:   1
(25). [0,0,2,5]: 434 | (1103). [1,1,0,3]:  62 |                       
(26). [0,0,2,6]:  62 | (1104). [1,1,0,4]:  14 |                       
```

## 5-и значные коды

**Влияние на все цифры:**

- A<sub>1</sub>: Через 7 кодирования
- A<sub>2</sub>: Через 5 кодирования
- A<sub>3</sub>: Через 4 кодирования
- A<sub>4</sub>: Через 6 кодирования
- A<sub>5</sub>: Через 8 кодирования

***Ленты:***
```
ID.  FIRST:         LEN
-----------------------
(0). [0,0,0,0,0]:     1
(1). [0,0,0,0,1]: 24211
(2). [0,0,0,0,2]:   781
(3). [0,0,0,0,3]: 24211
(4). [0,0,0,0,4]:   781
(5). [0,0,0,0,5]:    31
(6). [0,0,0,0,6]:   781
(7). [0,0,0,0,7]: 24211
(8). [0,0,0,0,8]:   781
(9). [0,0,0,0,9]: 24211
```

*Суммы лент:*
Так как любую цифру в 5 позиции пожно представить суммой без переноса двух других цифр (по 4 варианта без учета перестоновки) то любую (без смещения) ленту можно представить в виде суммы двух других, отличных от изначального. После этого можно применить смещение исходного цикла к смещению элементов суммы

Так-же любую ленту (без смещения) можно разложить через насколько (1) лент

Таблица разложение ленты на 2 конкретные: [Таблица разложений](DisperceTable.md)
Таблица разложения ленты на все, и на все кроме неё: [Таблица разложений на все](DisperceT1.md)

- Две четные ленты всегда образуют четную ленту
- Две нечетные ленты (за исключением (5)) образуют любую ленту кроме (0) и (5), с исключениями из безовых сумм
- Ленты разной четности образуют только нечетные (любую кроме ленты (5), с исключениями из безовых сумм)
- Четная + (5) образует только ленту прямой суммы
- Нечетная + (5) образует либо саму себя либо ленту прямой суммы


*Ленты для цифр в позиции:*
```
      1    2    3    4    5
"1"  (1)  (1)  (1)  (9)  (1)
"2"  (2)  (2)  (2)  (8)  (2)
"3"  (3)  (3)  (3)  (7)  (3)
"4"  (4)  (4)  (4)  (6)  (4)
"5"  (5)  (5)  (5)  (5)  (5)
"6"  (6)  (6)  (6)  (4)  (6)
"7"  (7)  (7)  (7)  (3)  (7)
"8"  (8)  (8)  (8)  (2)  (8)
"9"  (9)  (9)  (9)  (1)  (9)
```

### 6-x значные
--

## Использование

```haskell
import HomaCode

-- Test
main :: IO ()
main = do
  putStrLn $ code [1,2,3,4]
```
